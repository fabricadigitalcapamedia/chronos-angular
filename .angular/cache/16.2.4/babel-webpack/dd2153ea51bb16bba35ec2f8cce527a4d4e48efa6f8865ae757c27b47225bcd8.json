{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nclass AutenticationService {\n  constructor(router) {\n    this.router = router;\n    this.isAuthenticated = false;\n  }\n  canActivate() {\n    const valorGuardado = localStorage.getItem('login');\n    this.isAuthenticated = valorGuardado === 'true';\n    if (this.isAuthenticated) {\n      return this.isAuthenticated;\n    } else {\n      return this.router.createUrlTree(['/login']);\n    }\n  }\n  canActivateLogin() {\n    const valorGuardado = localStorage.getItem('login');\n    this.isAuthenticated = valorGuardado === 'true';\n    if (this.isAuthenticated) {\n      return this.router.createUrlTree(['/home']);\n    } else {\n      return this.router.navigate(['/login']);\n    }\n  }\n  logout() {\n    localStorage.removeItem('login');\n    this.router.navigate(['/login']);\n  }\n  resetTimer() {\n    clearTimeout(this.timeout);\n    this.timeout = setTimeout(() => {\n      this.logout();\n    }, 360000); // 1 minutos en milisegundos\n  }\n\n  initActivityListeners() {\n    // Escucha eventos de actividad, como clics del mouse y pulsaciones de teclas, para reiniciar el temporizador.\n    window.addEventListener('mousemove', this.resetTimer.bind(this));\n    window.addEventListener('keydown', this.resetTimer.bind(this));\n  }\n  static #_ = this.ɵfac = function AutenticationService_Factory(t) {\n    return new (t || AutenticationService)(i0.ɵɵinject(i1.Router));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AutenticationService,\n    factory: AutenticationService.ɵfac,\n    providedIn: 'root'\n  });\n}\nexport { AutenticationService };","map":{"version":3,"names":["AutenticationService","constructor","router","isAuthenticated","canActivate","valorGuardado","localStorage","getItem","createUrlTree","canActivateLogin","navigate","logout","removeItem","resetTimer","clearTimeout","timeout","setTimeout","initActivityListeners","window","addEventListener","bind","_","i0","ɵɵinject","i1","Router","_2","factory","ɵfac","providedIn"],"sources":["C:\\Claro\\chronos-angular\\src\\app\\autentication.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { LoginComponent } from './module/seguridad/partial/login/login.component';\nimport { GenerateJsonService } from './generate-json.service';\nimport { Router } from '@angular/router';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AutenticationService {\n  private isAuthenticated = false;\n  private timeout: any;\n  constructor(private router: Router) { }\n\n  canActivate() {\n    const valorGuardado = localStorage.getItem('login');\n    this.isAuthenticated = valorGuardado === 'true';\n    if (this.isAuthenticated) { return this.isAuthenticated; }\n    else { return this.router.createUrlTree(['/login']); }\n  }\n\n  canActivateLogin() {\n    const valorGuardado = localStorage.getItem('login');\n    this.isAuthenticated = valorGuardado === 'true';\n    if (this.isAuthenticated) {\n      return this.router.createUrlTree(['/home']);\n    }\n    else { return this.router.navigate(['/login']);}\n  }\n\n  logout(): void {\n    localStorage.removeItem('login');\n    this.router.navigate(['/login']);\n  }\n\n  resetTimer() {\n    clearTimeout(this.timeout);\n    this.timeout = setTimeout(() => {\n      this.logout();\n    }, 360000); // 1 minutos en milisegundos\n  }\n\n  initActivityListeners() {\n    // Escucha eventos de actividad, como clics del mouse y pulsaciones de teclas, para reiniciar el temporizador.\n    window.addEventListener('mousemove', this.resetTimer.bind(this));\n    window.addEventListener('keydown', this.resetTimer.bind(this));\n  }\n}\n"],"mappings":";;AAMA,MAGaA,oBAAoB;EAG/BC,YAAoBC,MAAc;IAAd,KAAAA,MAAM,GAANA,MAAM;IAFlB,KAAAC,eAAe,GAAG,KAAK;EAEO;EAEtCC,WAAWA,CAAA;IACT,MAAMC,aAAa,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IACnD,IAAI,CAACJ,eAAe,GAAGE,aAAa,KAAK,MAAM;IAC/C,IAAI,IAAI,CAACF,eAAe,EAAE;MAAE,OAAO,IAAI,CAACA,eAAe;KAAG,MACrD;MAAE,OAAO,IAAI,CAACD,MAAM,CAACM,aAAa,CAAC,CAAC,QAAQ,CAAC,CAAC;;EACrD;EAEAC,gBAAgBA,CAAA;IACd,MAAMJ,aAAa,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IACnD,IAAI,CAACJ,eAAe,GAAGE,aAAa,KAAK,MAAM;IAC/C,IAAI,IAAI,CAACF,eAAe,EAAE;MACxB,OAAO,IAAI,CAACD,MAAM,CAACM,aAAa,CAAC,CAAC,OAAO,CAAC,CAAC;KAC5C,MACI;MAAE,OAAO,IAAI,CAACN,MAAM,CAACQ,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;;EAChD;EAEAC,MAAMA,CAAA;IACJL,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC;IAChC,IAAI,CAACV,MAAM,CAACQ,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;EAClC;EAEAG,UAAUA,CAAA;IACRC,YAAY,CAAC,IAAI,CAACC,OAAO,CAAC;IAC1B,IAAI,CAACA,OAAO,GAAGC,UAAU,CAAC,MAAK;MAC7B,IAAI,CAACL,MAAM,EAAE;IACf,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC;EACd;;EAEAM,qBAAqBA,CAAA;IACnB;IACAC,MAAM,CAACC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACN,UAAU,CAACO,IAAI,CAAC,IAAI,CAAC,CAAC;IAChEF,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACN,UAAU,CAACO,IAAI,CAAC,IAAI,CAAC,CAAC;EAChE;EAAC,QAAAC,CAAA,G;qBArCUrB,oBAAoB,EAAAsB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,MAAA;EAAA;EAAA,QAAAC,EAAA,G;WAApB1B,oBAAoB;IAAA2B,OAAA,EAApB3B,oBAAoB,CAAA4B,IAAA;IAAAC,UAAA,EAFnB;EAAM;;SAEP7B,oBAAoB"},"metadata":{},"sourceType":"module","externalDependencies":[]}